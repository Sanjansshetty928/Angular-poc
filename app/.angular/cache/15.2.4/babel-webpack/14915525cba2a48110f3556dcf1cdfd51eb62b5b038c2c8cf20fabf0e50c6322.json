{"ast":null,"code":"import { HttpHeaders, HttpParams } from \"@angular/common/http\";\nimport { map, catchError } from 'rxjs/operators';\nimport { Subject, throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PostsService {\n  constructor(http) {\n    this.http = http;\n    // @ViewChild('postForm', { static: false }) signupForm!: NgForm;\n    this.error = new Subject();\n  }\n  createAndStorePost(title, content) {\n    const postData = {\n      title: title,\n      content: content\n    };\n    this.http.post(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\", postData).subscribe(responseData => {\n      console.log(responseData);\n    }, error => {\n      this.error.next(error.message);\n    });\n  }\n  fetchPosts() {\n    let searchParams = new HttpParams();\n    searchParams = searchParams.append('print', 'pretty');\n    searchParams = searchParams.append('custom', 'key');\n    return this.http.get(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\", {\n      headers: new HttpHeaders({\n        \"Custom-Header\": \"Hello\"\n      })\n      // params:new HttpParams().set('print','pretty')\n    }).pipe(map(responseData => {\n      const postsArray = [];\n      for (const key in responseData) {\n        if (responseData.hasOwnProperty(key)) {\n          postsArray.push({\n            ...responseData[key],\n            id: key\n          });\n        }\n      }\n      return postsArray;\n    }), catchError(errorRes => {\n      return throwError(errorRes);\n    }));\n  }\n  deletePosts() {\n    return this.http.delete(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\");\n  }\n}\nPostsService.ɵfac = function PostsService_Factory(t) {\n  return new (t || PostsService)(i0.ɵɵinject(i1.HttpClient));\n};\nPostsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PostsService,\n  factory: PostsService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAAA,SAAqBA,WAAW,EAAEC,UAAU,QAAQ,sBAAsB;AAI1E,SAAQC,GAAG,EAACC,UAAU,QAAM,gBAAgB;AAC5C,SAASC,OAAO,EAACC,UAAU,QAAQ,MAAM;;;AAGzC,OAAM,MAAOC,YAAY;EAIrBC,YAAoBC,IAAe;IAAf,SAAI,GAAJA,IAAI;IAHxB;IACA,UAAK,GAAC,IAAIJ,OAAO,EAAU;EAEU;EACrCK,kBAAkB,CAACC,KAAY,EAACC,OAAc;IAC1C,MAAMC,QAAQ,GAAM;MAACF,KAAK,EAACA,KAAK;MAACC,OAAO,EAACA;IAAO,CAAC;IACjD,IAAI,CAACH,IAAI,CAACK,IAAI,CAAgB,wEAAwE,EAAED,QAAQ,CAAC,CAACE,SAAS,CAACC,YAAY,IAAG;MACvIC,OAAO,CAACC,GAAG,CAACF,YAAY,CAAC;IAG3B,CAAC,EAACG,KAAK,IAAE;MACP,IAAI,CAACA,KAAK,CAACC,IAAI,CAACD,KAAK,CAACE,OAAO,CAAC;IAChC,CAAC,CAAC;EAIR;EACAC,UAAU;IACN,IAAIC,YAAY,GAAC,IAAIrB,UAAU,EAAE;IACjCqB,YAAY,GAACA,YAAY,CAACC,MAAM,CAAC,OAAO,EAAC,QAAQ,CAAC;IAClDD,YAAY,GAACA,YAAY,CAACC,MAAM,CAAC,QAAQ,EAAC,KAAK,CAAC;IAChD,OAAO,IAAI,CAACf,IAAI,CAACgB,GAAG,CAAsB,wEAAwE,EAClH;MACIC,OAAO,EAAC,IAAIzB,WAAW,CAAC;QAAC,eAAe,EAAC;MAAO,CAAC;MACjD;KACH,CAAC,CAAC0B,IAAI,CAACxB,GAAG,CAAEa,YAAgC,IAAI;MACnD,MAAMY,UAAU,GAAU,EAAE;MAC5B,KAAK,MAAMC,GAAG,IAAIb,YAAY,EAAE;QAC9B,IAAIA,YAAY,CAACc,cAAc,CAACD,GAAG,CAAC,EAAE;UACpCD,UAAU,CAACG,IAAI,CAAC;YAAC,GAAGf,YAAY,CAACa,GAAG,CAAC;YAAEG,EAAE,EAAEH;UAAG,CAAE,CAAC;;;MAGrD,OAAOD,UAAU;IAEnB,CAAC,CAAC,EACFxB,UAAU,CAAC6B,QAAQ,IAAE;MACjB,OAAO3B,UAAU,CAAC2B,QAAQ,CAAC;IAG/B,CAAC,CAAC,CAAC;EACH;EACAC,WAAW;IACR,OAAO,IAAI,CAACzB,IAAI,CAAC0B,MAAM,CAAC,wEAAwE,CAAC;EACpG;;AA5CS5B,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;SAAZA,YAAY;EAAA6B,SAAZ7B,YAAY;EAAA8B,YADD;AAAM","names":["HttpHeaders","HttpParams","map","catchError","Subject","throwError","PostsService","constructor","http","createAndStorePost","title","content","postData","post","subscribe","responseData","console","log","error","next","message","fetchPosts","searchParams","append","get","headers","pipe","postsArray","key","hasOwnProperty","push","id","errorRes","deletePosts","delete","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Sanjan.shetty\\OneDrive - Happiest Minds Technologies Limited\\Desktop\\Poc-angular\\app\\src\\app\\posts.service.ts"],"sourcesContent":["import { HttpClient, HttpHeaders, HttpParams } from \"@angular/common/http\";\r\nimport { Injectable, ViewChild } from \"@angular/core\";\r\nimport { NgForm } from \"@angular/forms\";\r\nimport { Post } from \"./post.model\";\r\nimport {map,catchError} from'rxjs/operators';\r\nimport { Subject,throwError } from \"rxjs\";\r\n\r\n@Injectable({providedIn:'root'})\r\nexport class PostsService{\r\n    // @ViewChild('postForm', { static: false }) signupForm!: NgForm;\r\n    error=new Subject<string>();\r\n\r\n    constructor(private http:HttpClient){}\r\n    createAndStorePost(title:string,content:string){\r\n        const postData:Post={title:title,content:content}\r\n        this.http.post<{name:string}>(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\", postData).subscribe(responseData => {\r\n            console.log(responseData);\r\n        \r\n      \r\n          },error=>{\r\n            this.error.next(error.message);\r\n          })  \r\n          \r\n      \r\n\r\n    }\r\n    fetchPosts(){\r\n        let searchParams=new HttpParams();\r\n        searchParams=searchParams.append('print','pretty')\r\n        searchParams=searchParams.append('custom','key')\r\n        return this.http.get<{[key:string]:Post}>(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\",\r\n        {\r\n            headers:new HttpHeaders({\"Custom-Header\":\"Hello\"}),\r\n            // params:new HttpParams().set('print','pretty')\r\n        }).pipe(map((responseData:{[key:string]:Post}) => {\r\n      const postsArray:Post[] = [];\r\n      for (const key in responseData) {\r\n        if (responseData.hasOwnProperty(key)) {\r\n          postsArray.push({...responseData[key], id: key });\r\n        }\r\n      }\r\n      return postsArray;\r\n\r\n    }),\r\n    catchError(errorRes=>{\r\n        return throwError(errorRes);\r\n\r\n\r\n    }));\r\n    }\r\n    deletePosts(){\r\n       return this.http.delete(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\")\r\n    }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}