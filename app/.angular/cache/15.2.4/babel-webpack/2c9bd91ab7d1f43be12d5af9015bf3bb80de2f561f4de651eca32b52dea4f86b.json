{"ast":null,"code":"import { HttpEventType, HttpHeaders, HttpParams } from \"@angular/common/http\";\nimport { map, catchError, tap } from 'rxjs/operators';\nimport { Subject, throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PostsService {\n  constructor(http) {\n    this.http = http;\n    // @ViewChild('postForm', { static: false }) signupForm!: NgForm;\n    this.error = new Subject();\n  }\n  createAndStorePost(title, content) {\n    const postData = {\n      title: title,\n      content: content\n    };\n    this.http.post(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\", postData, {\n      observe: 'response'\n    }).subscribe(responseData => {\n      console.log(responseData);\n    }, error => {\n      this.error.next(error.message);\n    });\n  }\n  fetchPosts() {\n    let searchParams = new HttpParams();\n    searchParams = searchParams.append('print', 'pretty');\n    searchParams = searchParams.append('custom', 'key');\n    return this.http.get(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\", {\n      headers: new HttpHeaders({\n        \"Custom-Header\": \"Hello\"\n      }),\n      params: searchParams\n      // params:new HttpParams().set('print','pretty')\n    }).pipe(map(responseData => {\n      const postsArray = [];\n      for (const key in responseData) {\n        if (responseData.hasOwnProperty(key)) {\n          postsArray.push({\n            ...responseData[key],\n            id: key\n          });\n        }\n      }\n      return postsArray;\n    }), catchError(errorRes => {\n      return throwError(errorRes);\n    }));\n  }\n  deletePosts() {\n    return this.http.delete(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\", {\n      observe: 'events' //tap operator\n    }).pipe(tap(event => {\n      console.log(event);\n      if (event.type === HttpEventType.Sent) {\n        // ....\n      }\n      if (event.type === HttpEventType.Response) {\n        console.log(event.body);\n      }\n    }));\n  }\n}\nPostsService.ɵfac = function PostsService_Factory(t) {\n  return new (t || PostsService)(i0.ɵɵinject(i1.HttpClient));\n};\nPostsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PostsService,\n  factory: PostsService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAAA,SAAqBA,aAAa,EAAEC,WAAW,EAAEC,UAAU,QAAQ,sBAAsB;AAIzF,SAAQC,GAAG,EAACC,UAAU,EAACC,GAAG,QAAM,gBAAgB;AAChD,SAASC,OAAO,EAACC,UAAU,QAAQ,MAAM;;;AAIzC,OAAM,MAAOC,YAAY;EAIrBC,YAAoBC,IAAe;IAAf,SAAI,GAAJA,IAAI;IAHxB;IACA,UAAK,GAAC,IAAIJ,OAAO,EAAU;EAEU;EACrCK,kBAAkB,CAACC,KAAY,EAACC,OAAc;IAC1C,MAAMC,QAAQ,GAAM;MAACF,KAAK,EAACA,KAAK;MAACC,OAAO,EAACA;IAAO,CAAC;IACjD,IAAI,CAACH,IAAI,CAACK,IAAI,CAAgB,wEAAwE,EAAED,QAAQ,EAChH;MACIE,OAAO,EAAC;KACX,CAAC,CAACC,SAAS,CAACC,YAAY,IAAG;MACxBC,OAAO,CAACC,GAAG,CAACF,YAAY,CAAC;IAG3B,CAAC,EAACG,KAAK,IAAE;MACP,IAAI,CAACA,KAAK,CAACC,IAAI,CAACD,KAAK,CAACE,OAAO,CAAC;IAChC,CAAC,CAAC;EAIR;EACAC,UAAU;IACN,IAAIC,YAAY,GAAC,IAAIvB,UAAU,EAAE;IACjCuB,YAAY,GAACA,YAAY,CAACC,MAAM,CAAC,OAAO,EAAC,QAAQ,CAAC;IAClDD,YAAY,GAACA,YAAY,CAACC,MAAM,CAAC,QAAQ,EAAC,KAAK,CAAC;IAChD,OAAO,IAAI,CAAChB,IAAI,CAACiB,GAAG,CAAsB,wEAAwE,EAClH;MACIC,OAAO,EAAC,IAAI3B,WAAW,CAAC;QAAC,eAAe,EAAC;MAAO,CAAC,CAAC;MAClD4B,MAAM,EAACJ;MACP;KACH,CAAC,CAACK,IAAI,CAAC3B,GAAG,CAAEe,YAAgC,IAAI;MACnD,MAAMa,UAAU,GAAU,EAAE;MAC5B,KAAK,MAAMC,GAAG,IAAId,YAAY,EAAE;QAC9B,IAAIA,YAAY,CAACe,cAAc,CAACD,GAAG,CAAC,EAAE;UACpCD,UAAU,CAACG,IAAI,CAAC;YAAC,GAAGhB,YAAY,CAACc,GAAG,CAAC;YAAEG,EAAE,EAAEH;UAAG,CAAE,CAAC;;;MAGrD,OAAOD,UAAU;IAEnB,CAAC,CAAC,EACF3B,UAAU,CAACgC,QAAQ,IAAE;MACjB,OAAO7B,UAAU,CAAC6B,QAAQ,CAAC;IAG/B,CAAC,CAAC,CAAC;EACH;EACAC,WAAW;IACR,OAAO,IAAI,CAAC3B,IAAI,CAAC4B,MAAM,CAAC,wEAAwE,EAAC;MAChGtB,OAAO,EAAC,QAAQ;KAEhB,CAAC,CAACc,IAAI,CAACzB,GAAG,CAACkC,KAAK,IAAE;MAClBpB,OAAO,CAACC,GAAG,CAACmB,KAAK,CAAC;MAClB,IAAGA,KAAK,CAACC,IAAI,KAAGxC,aAAa,CAACyC,IAAI,EAAC;QAC/B;MAAA;MAEJ,IAAGF,KAAK,CAACC,IAAI,KAAGxC,aAAa,CAAC0C,QAAQ,EAAC;QACnCvB,OAAO,CAACC,GAAG,CAACmB,KAAK,CAACI,IAAI,CAAC;;IAG5B,CAAC,CAAC,CAAC;EACN;;AA5DSnC,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;SAAZA,YAAY;EAAAoC,SAAZpC,YAAY;EAAAqC,YADD;AAAM","names":["HttpEventType","HttpHeaders","HttpParams","map","catchError","tap","Subject","throwError","PostsService","constructor","http","createAndStorePost","title","content","postData","post","observe","subscribe","responseData","console","log","error","next","message","fetchPosts","searchParams","append","get","headers","params","pipe","postsArray","key","hasOwnProperty","push","id","errorRes","deletePosts","delete","event","type","Sent","Response","body","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Sanjan.shetty\\OneDrive - Happiest Minds Technologies Limited\\Desktop\\Poc-angular\\app\\src\\app\\posts.service.ts"],"sourcesContent":["import { HttpClient, HttpEventType, HttpHeaders, HttpParams } from \"@angular/common/http\";\r\nimport { Injectable, ViewChild } from \"@angular/core\";\r\nimport { NgForm } from \"@angular/forms\";\r\nimport { Post } from \"./post.model\";\r\nimport {map,catchError,tap} from'rxjs/operators';\r\nimport { Subject,throwError } from \"rxjs\";\r\nimport { IfStmt } from \"@angular/compiler\";\r\n\r\n@Injectable({providedIn:'root'})\r\nexport class PostsService{\r\n    // @ViewChild('postForm', { static: false }) signupForm!: NgForm;\r\n    error=new Subject<string>();\r\n\r\n    constructor(private http:HttpClient){}\r\n    createAndStorePost(title:string,content:string){\r\n        const postData:Post={title:title,content:content}\r\n        this.http.post<{name:string}>(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\", postData,\r\n        {\r\n            observe:'response'\r\n        }).subscribe(responseData => {\r\n            console.log(responseData);\r\n        \r\n      \r\n          },error=>{\r\n            this.error.next(error.message);\r\n          })  \r\n          \r\n      \r\n\r\n    }\r\n    fetchPosts(){\r\n        let searchParams=new HttpParams();\r\n        searchParams=searchParams.append('print','pretty')\r\n        searchParams=searchParams.append('custom','key')\r\n        return this.http.get<{[key:string]:Post}>(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\",\r\n        {\r\n            headers:new HttpHeaders({\"Custom-Header\":\"Hello\"}),\r\n            params:searchParams\r\n            // params:new HttpParams().set('print','pretty')\r\n        }).pipe(map((responseData:{[key:string]:Post}) => {\r\n      const postsArray:Post[] = [];\r\n      for (const key in responseData) {\r\n        if (responseData.hasOwnProperty(key)) {\r\n          postsArray.push({...responseData[key], id: key });\r\n        }\r\n      }\r\n      return postsArray;\r\n\r\n    }),\r\n    catchError(errorRes=>{\r\n        return throwError(errorRes);\r\n\r\n\r\n    }));\r\n    }\r\n    deletePosts(){\r\n       return this.http.delete(\"https://ng-complete-guide-4db6b-default-rtdb.firebaseio.com/posts.json\",{\r\n        observe:'events'//tap operator\r\n        \r\n       }).pipe(tap(event=>{\r\n        console.log(event);\r\n        if(event.type===HttpEventType.Sent){\r\n            // ....\r\n        }\r\n        if(event.type===HttpEventType.Response){\r\n            console.log(event.body);\r\n            \r\n        }\r\n       }))\r\n    }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}